24 Carrot Gardens Blockchain Rewards

a loyalty program for the 24 Carrot urban farming project

Introduction
Beyond headlines which speculate on the merit of bitcoin as a store of value lies a much denser topic. The transformation to a digital world is underway and it has taken a turn that few would have expected ten years ago and remains a mystery to a great majority of the population. The keywords are decentralization, smart contracts, cryptocurrencies and the Internet of Things and blockchain technology is at the heart of it all. 

This project is an open-source effort to decrypt the blockchain through an auspicious entryway: a loyalty rewards program an urban farming project, 24 Carrot Gardens. It is an experimental application, deployed mainly as a learning exercise and a low-stakes introduction to a deeper understanding of the potential of blockchain technology. This is an experiential art project exploring the dynamic relationship between technology, community, microeconomics, privacy, security, identity, transparency, and fairness.

24 Carrot Gardens is an urban farming initiative currently operating near the corner of Music and Arts St. in the 8th Ward neighborhood of New Orleans. The initiative is a project of the Life is Art Foundation and KK Projects, founded by former resident Kirsha Kaechele. The garden is sponsored by The Museum of Old and New Art (MONA) in Hobart, Tasmania where Kirsha now resides. The goals of the garden are simply to engage neighborhood kids in a productive and educational way. Since the garden’s inception, the program has been a success, with steadily increasing participation. The produce is sold to many of the finest restaurants in New Orleans. Beyond the garden project, MONA is also sponsors to PS I LOVE YOU, a community project dedicated in equal parts to community, education, the arts, and technology.
Why blockchain?
Loyalty programs are thoroughly woven into the fabric of our daily lives. From the buy-9-get-one-free sandwich card you carry in your wallet to consumer data gathering programs implemented by grocers and drugstores, frequent traveler rewards and cashback credit cards, the loyalty program at this point is ubiquitous. The utility of these programs should not be questioned, but why go to the trouble to implement one on a blockchain?

Transparent. Secure. Immutable. 

A loyalty rewards program is simple to implement using a blockchain -- reward points are tracked as cryptographic digital assets. All transactions are fully transparent to anyone that chooses to participate in the network. Algorithms have been designed that are provably fault tolerant in the face of a significant adversary such that network nodes unknown and untrusting of one another can reach agreement and keep a common transaction history secure and immutable.
Scalable. Extensible
Because the network is comprised of nodes which are incentivized for their participation, the network is elastically scalable. The loyalty rewards program represents a simple well-bounded problem and as such makes it a good place to start. However, there are several other potential blockchain applications that may be implemented. 

Within the loyalty rewards program, there are opportunities to gamify the experience. One idea is to introduce a location based component coupled with random rewards, something along the lines of Pokemon Go! Another idea for gamification involves collecting and spending reward points in groups. This idea is explained in more detail later in this document.

There are many blockchain projects currently under development which could be incorporated or used as the inspiration for new dapps, the colloquial term for “distributed applications,” as this microeconomy evolves. Some examples include:

Colu - a local currency and digital wallet encouraging locavorism
Ujo Music - a music rights management platform
Provenance - a means of using the blockchain in supply chain management
FollowMyVote - a secure online voting platform
FOAM - decentralized architecture
DAO - how to build a democracy on a blockchain

The 24 Carrot Garden Loyalty program starts with a humble beginning, but the vision is grand.

This project is about the exploration of possibility, engaging with and helping to pioneer the future, in the heart of a city seemingly forgotten by time in a neighborhood with a vibrant community but institutionally and technologically neglected. This project represents an opportunity to nurture and grow an economic system from the grass roots, a suitable metaphor for something that starts as part of an urban farming project.

The Application
At its most basic level, this decentralized application (commonly known as a dapp) works like a version of a payment app for sharing a cryptographic token built on the open-source platform developed by stellar.org. The stellar platform is a light-weight, scalable platform with the capability of handling simple smart contracts. Anyone can create a user account online using the sign-up form at www.24carrotgardens.com/signup This will initialize the database information and generate an encrypted key file as output. This file is used to program key fobs that serve as digital wallets as well as identifiers for program participants. Administrators are users with additional privileges. These users are allowed to check-in and check-out gardeners which triggers a smart contract to debit and issue reward tokens accordingly.

Each gardener receives an initial account balance of 20 carrots. When checking in to garden, the user must hold a minimum of 10 carrots in their account which is debited as a bond. Well-behaved and productive gardeners will be allowed to check-out which releases their 10 carrot bond from escrow and deposits an additional 10 carrots as a reward.  Additional rewards may be issued in 1 carrot increments at the discretion of the administrators.
Each gardener that stays active by checking in at the garden at least once during the week earns an additional stipend of 5 carrots at the end of each week. Other incentives such as random rewards issued based on geolocation, similar to a game like Pokemon Go may be incorporated later. Smartphone versions of the applications will be available for iOS and Android

Here is a link to a document that describes the app in more detail:  
The Platform
There is a lot of intriguing potential of building off and ERC20 compliant token and the ethereum protocol. Many tools are currently under development which could enable this program to leverage advanced applications that would not be feasible to develop in a standalone app. Unfortunately, most of the existing dapps are not operationally live outside of the test networks and it may be a while before a critical mass of stable, useful dapps are available.

Hyperledger coupled with Bluemix and Azure cloud-based servers are intriguing as they have the corporate backing of IBM  and MicroSoft, two companies that are investing heavily and emerging as an industry leaders in the blockchain space.  The hyperledger platform is open-source and there are some useful and functional applications available. There are significant drawbacks in terms of the cost of implementation of the Stellar blockchain protocol and Amazon Web Services was chosen based on low cost, available functionality and ease of implementation. It is possible to make the Amazon cloud-based web servers operational at the free tier level. Stellar has low transaction speeds and has an scalable consensus protocol that unlike ethereum in its current state, does not require the inefficient use of proof-of-work, which expends large amounts of energy while solving cryptographic puzzles.
Program details

The fundamental unit of this cryptocurrency is the carrot with a total fixed maximum distribution of 24,000,000 units.
3,600,000 carrots, or 15%, held in administrative reserve
14,400,000 carrots, or 60%, reserved for public sale as an Initial Coin Offering (ICO)
6,000,000 carrots, or 25%, reserved for loyalty program

The initial value of a carrot is arbitrarily pegged at $1 for assigning the value of tradable goods such as vegetable produce and exchange for the market value of exchange premiums.
The exchange premiums will initially be donated by local business solicited for charitable contributions. For example, a local retailers may donate a store credit to the cause.
The produce grown in the gardens will be sold in exchange for tokens. Tokens may be purchased from anyone who holds a token.
Giving the Tokens Value
Local retailers accepting tokens in exchange for merchandise will be asked to donate their tokens back to the account reserved for loyalty program administration, though any holder of tokens is free to exchange them at their discretion if a true market economy for tokens develops over time.

To create another avenue for market exchange of carrots, events held at Port St and PS I Love You will sell tokens to the public. Cash generated through the sale of tokens will be distributed at the discretion of the administration. Any holder of tokens may use their tokens for admission to the events

A full 60% of the token reserve will be held back at the discretion of the board for sale to the public in an ICO. At this point in time, the regulatory environment for ICOs is not clear and this topic will not further developed at this time. 
Bootstrapping a Microeconomy
In the program infancy, the utility of these tokens will be limited. The plan to bootstrap the economy starts by soliciting local merchandisers for donations for the benefit of the kids. The pitch will also include an succinct explanation of the intention of this program to evolve into an independent decentralized micro-economy.  
A Novel Cold Wallet
Good design is tailored to its user base and the loyalty reward earners of this program have some curious constraints. As a digital asset, it is most easily implemented as an application on a smart phone. Naturally, the system will be tested as a smart phone app interacting with a webserver. However some of the participants are under 3 years old and many others lack the resources to maintain a smart phone. Considering that children are apt to misplace things, a novel approach to the cold wallet was conceived to address these constraints.

A cold wallet is a passive (unpowered) device that stores public and private keys for cryptographic addresses. The simplest form of a cold wallet is a sheet of paper with the keys written down, but a whole cottage industry has evolved around more sophisticated solutions, some which look like usb drives, others are made entirely of metal, designed to survive time and extreme environmental exposures including fire and explosion.

The security of a cold wallet is another consideration. Many are intended to be kept in a safe or a security deposit box. The more sophisticated approaches are encrypted and require user input, in some cases biometric feedback to secure the keys. Security involves a trade-offs in cost and convenience. This application solves for cost and convenience allowing that other more sophisticated solutions already exist. One simple solution can be likened to a bank debit card, an nfc-enabled or magnetic stripe card secured with a four-digit PIN. This elegant solution is thin and wallet-sized making it easy to carry. This approached was rejected in consideration that a 3-year old may have trouble remembering a PIN.

The solution is an nfc-enabled key-fob with three interlocking components. Each component holds the entire public key but only two-thirds of the private key, such that only one part is required to receive a transaction, but any two of the three keys can recreate the entire key. A child carries one part as identification to get credit for participation, leaving the other two parts in a secure spot. If the child wants to spend credits, it must carry two of three parts. If any one part is lost or stolen, the other two parts may be used to recreate the missing part or transfer the account balances to a new account with three new parts. Additional backup security measures are not required but may be taken at the discretion of the user.       Might need a visual here.  

NFC and QR
The choice of NFC over reading QR codes is worth reconsidering. Apple has only recently openend the NFC options on the iphone and many of the low-end Androids are not NFC-enabled. A QR reader can be put on any phone with a camera, so it is a reasonably easy solution to implement across android and ios platforms. The disadvantages of QR code are that it is less secure in the sense that any camera could photograph a QR code and it could be easily forged. Another advantage to using NFC is that significantly more data can be stored allowing more flexibility in the implementation of extensions to the application.
Wallet Design
The physical design of the cold wallet is a customized 3D printed part with an embedded NFC chip. The parts are printed on a Carbon M-series printer and consist of two materials, a latticed "poker-chip" made of a durable elastomer. A customizable, interior button is made of a hard plastic available in many colors. This button covers the nfc tag for protection and is customizeable with a maximum of XX ASCII characters debossed on the surface.

[insert image of key-fob]

The design intent considers that three interlocking chips can be worn as a watch or bracelet, necklace or keychain or carried in a pocket or purse or affixed to a cell phone.

[insert images of different wearable configuration]

The NFC tags are Mifare compatible, with 2K memory, configured to write once. These are low cost chips with enough memory to implement all of the concepts presented in this paper.
These parts can be printed in customized batches of 30 at a cost per part of $xx. The first are issue to garden participants free of charge with replacements issued payable with carrot tokens.
Multi-tiered Accounts 
As an extension of this concept, the keyfobs could be configured with two accounts. The first account is the public id account with a maximum balance of some low value, say 50 carrots. The entire private key for this account is written to each fob, making spend transactions possible from this account with only one part. Each key-fob is additionally encoded as described above, with two-thirds of the private key of a second account. This account has no maximum balance but is linked to the first account via smart contract. If the maximum balance of the first account is exceeded, the smart contract sweeps the excess into the secondary account. A second smart contract runs on a 24-hour cycle, topping up the first account to maximum balance at 8am each day.

Variations of the two-account cold wallet are possible, such as an n-tiered approach, with each account linked to another account with successively higher balances and successively longer top-up cycles.  In addition to a daily spending cap, weekly, monthly and annual spending caps could be enforced. Each tier requires an additional part to the keyfob and the security key is split into N+1 parts. So to implement daily, weekly, monthly and annual caps, the key is split into 5 parts, with 4-of-5 required to access the annual spending tier account.
Group Spending
Taking the idea of linked accounts a step further, another novel system could be implemented enabling and encouraging the accumulation of group rewards and facilitating group spending. As an example of how this might be implemented, imagine a family of four children participates in the gardening project. Their accounts are linked by smart contract such that if all four family members participate in the garden project within a given week, the group account earns 10 units of new token reward, denominated as a "garden." Let's say Pizza Delicious agrees to sell two extra-large pizzas in exchange for 50 garden tokens. If the multi-sig requirements for group spend are met, for example if each one of the four kids in the family shows up with one part of their key-fob linked to a group account holding at least 50 garden tokens, the smart contract will unlock the group account and validate the transaction.

The group reward tokens may be made distinguishable from the standard carrot tokens and rolled out in a soft-fork to avoid confusion.
Gamification
The popularity of collectibles among children is well established and the recent example of CryptoKitties, built off the non-fungible tokens on the ethereum platform illustrates how digital assets may be gamified. Many earlier examples of gamification exist, but CryptoKitties is the first with a fully developed front end, with a level of polish sufficient to attract a widespread office.

Non-fungibility is built into the design of the carrot token, but any utility capitalizing on this hook will not be implemented in the first phase of deployment.
System architecture
The system is built off the architecture of Stellar, a lightweight, scalable solution capable of handling traffic, providing decentralization and security in the infancy of the system without the burden of expensive transaction fees. The Stellar network enables the use of smart contracts sophisticated enough to handle all of the anticipated needs of this community server.
The client application is a point-of-sale device that implements nfc functions, initiates transactions and interacts with a cloud-based web server, an elastic computing resource on AWS. The cloud-based platform allows elastic, scalable resources while outsourcing hardware maintenance and providing redundancy and reliability.

The web server runs the api to implement the details of the custom components of the 24 Carrot implementation and interacts with the standard Stellar components: horizon, stellar-core and postgresql.
Horizon is the server-side interface layer to the stellar-core program.
Stellar-core implements the details of processing, validating and securing transactions and keeping the blockchain history.
Postgresql is the a relational database the Stellar platform uses to stores the actual blockchain ledger.

The application was developed using React-Native to make the facilitate easier maintenance across android and ios platforms.
The Hacker School
Further development and maintenance of this project will be part of the technical curriculum of PS I LOVE YOU. Redesign and customization of of the keyfob objects may be treated as an educational experience in terms of exploring design software and manufacturing methods.
From the perspective of computer science, this project has many avenues for educational discovery. It can be an introduction to the rapidly emerging field of blockchain technologies, but as described, this project incorporates a full stack programmatic learning opportunity including: working with IoT devices, developing mobile apps, configuring cloud-based web servers, UX, front end, back end and working with databases.

Further development of this project as an educational exercise may include setting up redundant nodes on cloud platforms competing with AWS, specifically Azure and Bluemix.  Besides the benefit of redundancy and reliability, this is a learning opportunity as a comparative study of the competing platforms.

Another follow up exercise could also be to implement the stack on Ethereum or Hyperledger. Ethereum is more expensive to run in terms of the transaction costs and computational complexity, but has incredible potential in terms of the breadth of applications that will soon be available. As developers build out the infrastructure of the ethereum platform, this could enable the pursuit of some new extensions of this project. A more thoughtful discussion of the pros and cons is forthcoming.
